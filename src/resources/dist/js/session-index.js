!function($){void 0===Craft.Events&&(Craft.Events={}),Craft.Events.DeleteSessionModal=Garnish.Modal.extend({id:null,sessionId:null,$deleteActionRadios:null,$deleteSubmitBtn:null,_deleting:!1,init:function(e,t){this.id=Math.floor(1e9*Math.random()),this.sessionId=e,t=$.extend(Craft.Events.DeleteSessionModal.defaults,t),this.$form=$('<form class="modal fitted delete-session-modal" method="post" accept-charset="UTF-8">'+Craft.getCsrfInput()+'<input type="hidden" name="action" value="events/sessions/delete-session"/>'+(Array.isArray(this.sessionId)?"":'<input type="hidden" name="sessionId" value="'+this.sessionId+'"/>')+(t.redirect?'<input type="hidden" name="redirect" value="'+t.redirect+'"/>':"")+"</form>").appendTo(Garnish.$bod);const a="radio"+Math.floor(1e9*Math.random()),i="radio"+Math.floor(1e9*Math.random()),s="radio"+Math.floor(1e9*Math.random()),n="radio"+Math.floor(1e9*Math.random());this.$body=$('<div class="body"><div class="options"><fieldset class="field"><legend class="h6">'+Craft.t("events","Apply changes to")+'</legend><div><div class="radio-group"><div><input type="radio" id="'+a+'" class="radio" name="contentAction" value="single"><label for="'+a+'">'+Craft.t("events","This occurrence")+'</label></div><div><input type="radio" id="'+i+'" class="radio" name="contentAction" value="all"><label for="'+i+'">'+Craft.t("events","All occurrences")+'</label></div><div><input type="radio" id="'+s+'" class="radio" name="contentAction" value="future"><label for="'+s+'">'+Craft.t("events","This and all future occurrences")+'</label></div><div><input type="radio" id="'+n+'" class="radio" name="contentAction" value="custom"><label for="'+n+'">'+Craft.t("events","Custom range")+'</label></div></div></div></fieldset><div class="apply-changes--custom hidden"></div></div></div>').appendTo(this.$form);var d=$("<div/>",{class:"date-container flex flex-nowrap padded"}).appendTo(this.$body.find(".apply-changes--custom"));this.$startDate=Craft.ui.createDateField({label:Craft.t("events","Start Date"),required:!0,name:"contentActionStartDate"}).appendTo(d),this.$endDate=Craft.ui.createDateField({label:Craft.t("events","End Date"),required:!0,name:"contentActionEndDate"}).appendTo(d),this.$startDateInput=this.$startDate.find('.datewrapper input[type="text"]'),this.$endDateInput=this.$endDate.find('.datewrapper input[type="text"]');let l=$('<div class="buttons right"/>').appendTo(this.$body),o=$("<button/>",{type:"button",class:"btn",text:Craft.t("app","Cancel")}).appendTo(l);this.$deleteActionRadios=this.$body.find('input[type="radio"]'),this.$deleteSubmitBtn=Craft.ui.createSubmitButton({class:"disabled",label:Craft.t("events","Delete {num, plural, =1{session} other{sessions}}",{num:Array.isArray(this.sessionId)?this.sessionId.length:1}),spinner:!0}).appendTo(l),this.addListener(o,"click","hide"),this.addListener(this.$startDateInput,"change","validateDeleteInputs"),this.addListener(this.$endDateInput,"change","validateDeleteInputs"),this.addListener(this.$deleteActionRadios,"change","validateDeleteInputs"),this.addListener(this.$deleteActionRadios,"change","onToggleChange"),this.addListener(this.$form,"submit","handleSubmit"),this.base(this.$form,t)},validateDeleteInputs:function(){var e=!1;return(this.$deleteActionRadios.slice(0,3).is(":checked")||this.$startDateInput.datepicker("getDate")&&this.$endDateInput.datepicker("getDate"))&&(e=!0),e?this.$deleteSubmitBtn.removeClass("disabled"):this.$deleteSubmitBtn.addClass("disabled"),e},onToggleChange(e){$(e.target).prop("checked")&&"custom"===$(e.target).val()?this.$form.find(".apply-changes--custom").removeClass("hidden"):this.$form.find(".apply-changes--custom").addClass("hidden"),this.updateSizeAndPosition()},handleSubmit:function(e){if(!this._deleting&&this.validateDeleteInputs()){this.$deleteSubmitBtn.addClass("loading"),this.disable(),this._deleting=!0;try{!1===this.settings.onSubmit()&&e.preventDefault()}catch(t){throw e.preventDefault(),this.$deleteSubmitBtn.removeClass("loading"),t}}else e.preventDefault()}},{defaults:{onSubmit:$.noop,redirect:null}})}(jQuery);
//# sourceMappingURL=session-index.js.map